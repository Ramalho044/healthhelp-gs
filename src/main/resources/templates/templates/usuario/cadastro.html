<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cadastro - HealthHelp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">
</head>
<body style="background:#f0f2f5; color:#121310;">

<section class="container d-flex align-items-center justify-content-center"
         style="min-height: 100vh; padding: 2rem 0;">
    <div class="card shadow-lg border-0 rounded-4" style="max-width: 720px; width: 100%;">
        <div class="card-body p-4 p-md-5">
            <h1 class="h3 fw-bold mb-1 text-center">Crie sua conta</h1>
            <p class="text-muted text-center mb-4">
                Preencha seus dados para começar a usar o HealthHelp.
            </p>

            <!-- Mensagem de erro -->
            <div th:if="${erro}" class="alert alert-danger" role="alert">
                <span th:text="${erro}"></span>
            </div>

            <!-- Mensagem de sucesso -->
            <div th:if="${mensagem}" class="alert alert-success" role="alert">
                <span th:text="${mensagem}"></span>
            </div>

            <form th:action="@{/usuarios}" th:object="${usuario}" method="post"
                  oninput="confirmaSenha.setCustomValidity(confirmaSenha.value !== senha.value ? 'As senhas não coincidem.' : '')">

                <div class="row g-3">
                    <!-- Nome -->
                    <div class="col-12">
                        <label for="nome" class="form-label">Nome completo</label>
                        <input type="text" class="form-control" id="nome" th:field="*{nome}"
                               placeholder="Seu nome completo" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></div>
                    </div>

                    <!-- Email -->
                    <div class="col-12">
                        <label for="email" class="form-label">E-mail</label>
                        <input type="email" class="form-control" id="email" th:field="*{email}"
                               placeholder="voce@exemplo.com" required>
                        <div class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                    </div>

                    <!-- Senha -->
                    <div class="col-md-6">
                        <label for="senha" class="form-label">Senha</label>
                        <input type="password"
                               class="form-control"
                               id="senha"
                               th:field="*{senha}"
                               required
                               minlength="8"
                               maxlength="60"
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&._-])[A-Za-z\d@$!%*?&._-]{8,60}$"
                               title="Mínimo 8 caracteres, com letras maiúsculas, minúsculas, números e caractere especial.">
                        <div class="form-text">
                            Mínimo 8 caracteres, com letra maiúscula, minúscula, número e caractere especial.
                        </div>
                        <div class="text-danger" th:if="${#fields.hasErrors('senha')}" th:errors="*{senha}"></div>
                    </div>

                    <!-- Confirmar senha -->
                    <div class="col-md-6">
                        <label for="confirmaSenha" class="form-label">Confirmar senha</label>
                        <input type="password"
                               class="form-control"
                               id="confirmaSenha"
                               name="confirmaSenha"
                               required>
                    </div>

                    <!-- Gênero -->
                    <div class="col-md-4">
                        <label for="genero" class="form-label">Gênero</label>
                        <select class="form-select" id="genero" th:field="*{genero}">
                            <option value="" selected>Selecione</option>
                            <option value="M">Masculino</option>
                            <option value="F">Feminino</option>
                            <option value="O">Outro / Prefiro não dizer</option>
                        </select>
                    </div>

                    <!-- Data de nascimento -->
                    <div class="col-md-4">
                        <label for="dataNascimento" class="form-label">Data de nascimento</label>
                        <input type="date" class="form-control" id="dataNascimento"
                               th:field="*{dataNascimento}">
                    </div>

                    <!-- Altura em cm -->
                    <div class="col-md-4">
                        <label for="alturaCm" class="form-label">Altura (cm)</label>
                        <input type="number"
                               class="form-control"
                               id="alturaCm"
                               th:field="*{alturaCm}"
                               min="100" max="250"
                               placeholder="Ex: 188">
                        <div class="form-text">
                            Informe em centímetros (ex: 188 para 1,88 m).
                        </div>
                    </div>

                    <!-- Peso em kg -->
                    <div class="col-md-4">
                        <label for="pesoKg" class="form-label">Peso (kg)</label>
                        <input type="number"
                               class="form-control"
                               id="pesoKg"
                               th:field="*{pesoKg}"
                               step="0.1"
                               min="30" max="300"
                               placeholder="Ex: 80.5">
                    </div>
                </div>

                <button type="submit"
                        class="btn btn-dark w-100 mt-4"
                        style="background:#121310; border-color:#121310;">
                    Cadastrar
                </button>

                <p class="text-center mt-3 mb-0">
                    Já tem uma conta?
                    <a th:href="@{/login}" class="link-dark">Faça login</a>
                </p>
            </form>
        </div>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>
